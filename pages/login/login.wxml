<!--pages/login/login.wxml-->
<view class="login-container">
  <!-- Logo和标题 -->
  <view class="header">
    <view class="logo-wrapper">
      <image class="logo-icon" src="/assets/tabbar/logo.svg" mode="aspectFit"></image>
    </view>
    <view class="title">喵上门</view>
    <view class="subtitle">INSTANT DOOR SERVICE</view>
  </view>

  <!-- 邀请人信息展示（拉新专属） -->
  <view class="referrer-info-section" wx:if="{{showReferrerInfo && referrerInfo}}">
    <view class="referrer-info-card">
      <view class="referrer-info-content">
        <view class="referrer-info-label">好友邀请</view>
        <view class="referrer-info-title">{{referrerInfo.referrerNickname}} 邀请您加入</view>
        <view class="referrer-info-desc">注册即可获得新人奖励</view>
      </view>
    </view>
  </view>

  <!-- 登录按钮区域 -->
  <view class="login-section">
    <button class="wechat-btn" hover-class="wechat-btn-hover" hover-start-time="0" hover-stay-time="70" bindtap="wechatLogin">
      快捷登录
    </button>
    <button class="skip-btn" hover-class="skip-btn-hover" hover-start-time="0" hover-stay-time="70" bindtap="goHome">
      暂不登录
    </button>
  </view>

  <!-- 协议同意 -->
  <view class="protocol-section">
    <view class="protocol-checkbox" bindtap="toggleAgreeProtocol">
      <view class="checkbox {{agreedProtocol ? 'checked' : ''}}">
        <text class="checkbox-icon" wx:if="{{agreedProtocol}}">✓</text>
      </view>
      <view class="protocol-text">
        <text>我已阅读并同意</text>
        <text class="protocol-link" catchtap="goPrivacyPolicy">《用户隐私协议》</text>
      </view>
    </view>
  </view>

  <!-- 返回按钮 -->
  <view class="back-btn" hover-class="back-btn-hover" hover-start-time="0" hover-stay-time="70" bindtap="goHome">
    ←
  </view>

  <!-- 手机号快捷登录按钮 -->
  <view class="phone-auth-modal" wx:if="{{showPhoneAuth}}">
    <view class="phone-auth-content">
      <view class="phone-auth-title">手机号快捷登录</view>
      <view class="phone-auth-desc">为了完成登录，需要获取您的手机号</view>
      <button 
        class="phone-auth-btn" 
        hover-class="phone-auth-btn-hover"
        hover-start-time="0"
        hover-stay-time="70"
        open-type="getPhoneNumber" 
        bindgetphonenumber="onPhoneNumberGet"
      >
        手机号快捷登录
      </button>
      <button class="phone-auth-cancel" hover-class="phone-auth-cancel-hover" hover-start-time="0" hover-stay-time="70" bindtap="cancelPhoneAuth">取消</button>
    </view>
  </view>

  <!-- 加载遮罩 -->
  <view class="loading-mask" wx:if="{{loading}}">
    <view class="loading-content">
      <view class="loading-spinner"></view>
      <text class="loading-text">{{loadingText || '处理中...'}}</text>
    </view>
  </view>
</view>