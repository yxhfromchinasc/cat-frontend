<view class="page" wx:if="{{!loading && detail}}">
  <!-- 基本信息 -->
  <view class="section order-info">
    <view class="section-title">订单信息</view>
    <view class="order-item">
      <text class="label">订单号：</text>
      <text class="value">{{orderNo}}</text>
    </view>
    <view class="order-item">
      <text class="label">订单状态：</text>
      <text class="status {{withdrawStatus}}">{{withdrawStatusDesc}}</text>
    </view>
  </view>

  <!-- 金额信息 -->
  <view class="section amount-info">
    <view class="section-title">金额明细</view>
    <view class="amount-item">
      <text class="label">提现金额：</text>
      <text class="value">¥{{amountStr}}</text>
    </view>
    <view class="amount-item" wx:if="{{feeStr && feeStr !== '0.00'}}">
      <text class="label">手续费：</text>
      <text class="value fee">-¥{{feeStr}}</text>
    </view>
    <view class="amount-item final">
      <text class="label">实际到账：</text>
      <text class="value final-amount">¥{{actualAmountStr}}</text>
    </view>
    <view class="amount-item" wx:if="{{detail.batchNo}}">
      <text class="label">转账单号：</text>
      <text class="value">{{detail.batchNo}}</text>
    </view>
    <view class="amount-item" wx:if="{{detail.errorMsg}}">
      <text class="label">失败原因：</text>
      <text class="value error">{{detail.errorMsg}}</text>
    </view>
  </view>

  <!-- 操作栏 -->
  <view class="actions-bar" wx:if="{{allowedActions && allowedActions.length > 0}}">
    <button 
      wx:for="{{allowedActions}}" 
      wx:key="*this"
      class="action-btn {{item === 'WITHDRAW' || item === 'CONTINUE_WITHDRAW' ? 'withdraw-btn' : item === 'CANCEL_TRANSFER' ? 'cancel-btn' : 'cancel-order-btn'}}"
      bindtap="handleAction"
      data-action="{{item}}"
    >
      {{item === 'WITHDRAW' ? '去提现' : item === 'CONTINUE_WITHDRAW' ? '继续提现' : item === 'CANCEL_TRANSFER' ? '取消本次提现' : item === 'CANCEL' ? '取消订单' : item}}
    </button>
  </view>
</view>

<view class="loading" wx:if="{{loading}}">
  <text>加载中...</text>
</view>
