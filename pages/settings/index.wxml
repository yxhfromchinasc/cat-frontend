<view class="page">
  <!-- 功能列表 -->
  <view class="menu-list">
    <!-- 关于我们 -->
    <view class="menu-item" bindtap="goAbout">
      <image class="menu-icon" src="/assets/tabbar/关于我们.png" mode="aspectFit"></image>
      <text class="menu-label">关于我们</text>
      <text class="menu-value">v{{appVersion}}</text>
      <text class="menu-arrow">›</text>
    </view>

    <!-- 用户协议 -->
    <view class="menu-item" bindtap="goUserAgreement">
      <image class="menu-icon" src="/assets/tabbar/用户协议.png" mode="aspectFit"></image>
      <text class="menu-label">用户协议</text>
      <text class="menu-arrow">›</text>
    </view>

    <!-- 隐私政策 -->
    <view class="menu-item" bindtap="goPrivacyPolicy">
      <image class="menu-icon" src="/assets/tabbar/隐私协议.png" mode="aspectFit"></image>
      <text class="menu-label">隐私政策</text>
      <text class="menu-arrow">›</text>
    </view>

    <!-- 消息设置 -->
    <view class="menu-item" bindtap="openMessageSetting">
      <image class="menu-icon" src="/assets/tabbar/提醒.png" mode="aspectFit"></image>
      <text class="menu-label">消息设置</text>
      <text class="menu-arrow">›</text>
    </view>

    <!-- 展示公告 -->
    <view class="menu-item" bindtap="showAnnouncements">
      <image class="menu-icon" src="/assets/tabbar/公告.png" mode="aspectFit"></image>
      <text class="menu-label">展示公告</text>
      <text class="menu-arrow">›</text>
    </view>
  </view>

  <!-- 退出登录 -->
  <view class="logout-section" wx:if="{{isLogin}}">
    <button class="logout-btn" bindtap="logout">
      <text class="btn-text">退出登录</text>
    </button>
  </view>

</view>

<!-- 公告弹窗（复用首页的样式和结构） -->
<view id="announcement-modal" class="announcement-modal" wx:if="{{showAnnouncementModal}}" bindtap="closeAnnouncementModal">
  <view class="announcement-popup" catchtap="stopPropagation">
    <!-- 标题区域（如果有标题） -->
    <view 
      wx:if="{{announcementData.title}}" 
      class="announcement-title"
      bindtap="onAnnouncementTap"
    >
      {{announcementData.title}}
    </view>
    
    <!-- 图片区域（如果有图片） -->
    <image 
      wx:if="{{announcementData.imageUrl}}" 
      class="announcement-image {{announcementData.title ? 'announcement-image-with-title' : 'announcement-image-without-title'}}" 
      src="{{announcementData.imageUrl}}" 
      mode="widthFix"
      style="{{announcementData.imageHeight ? 'height: ' + announcementData.imageHeight + 'px;' : ''}}"
      bindtap="onAnnouncementTap"
    ></image>
    
    <!-- 文字内容区域（如果有文字） -->
    <view 
      wx:if="{{announcementData.textContent}}" 
      class="announcement-text"
      style="font-size: {{announcementData.textFontSize || 16}}px; color: {{announcementData.textFontColor || '#000000'}};"
      bindtap="onAnnouncementTap"
    >
      {{announcementData.textContent}}
    </view>
    
    <!-- 底部按钮区域 -->
    <view class="announcement-footer">
      <view class="announcement-close-btn {{isCloseBtnLoading ? 'announcement-close-btn-loading' : ''}}" bindtap="closeAnnouncementModal">
        <view wx:if="{{isCloseBtnLoading}}" class="announcement-close-btn-loading-icon"></view>
        <text>{{isCloseBtnLoading ? '加载中' : '关闭'}}</text>
      </view>
    </view>
  </view>
</view>
