<view class="page">
  <!-- åœ°å›¾å®¹å™¨ -->
  <view class="map-container">
    <map
      id="servicePointMap"
      class="map"
      longitude="{{longitude}}"
      latitude="{{latitude}}"
      scale="{{scale}}"
      markers="{{markers}}"
      show-location="{{false}}"
      enable-scroll="{{true}}"
      enable-zoom="{{true}}"
      enable-3D="{{false}}"
      enable-overlooking="{{false}}"
      enable-rotate="{{false}}"
      bindmarkertap="onMarkerTap"
      bindregionchange="onRegionChange"
    >
      <!-- å›åˆ°æˆ‘çš„ä½ç½®æŒ‰é’® - ä½¿ç”¨ cover-view æ˜¾ç¤ºåœ¨åœ°å›¾ä¸Šæ–¹ -->
      <cover-view class="back-to-location-btn" bindtap="backToMyLocation">
        <cover-text class="btn-icon">ğŸ“</cover-text>
        <cover-text class="btn-text">æˆ‘çš„ä½ç½®</cover-text>
      </cover-view>
    </map>
  </view>

  <!-- åŠ è½½æç¤º -->
  <view class="loading-mask" wx:if="{{loading}}">
    <view class="loading-content">
      <text>æ­£åœ¨åŠ è½½é™„è¿‘æœåŠ¡ç‚¹...</text>
    </view>
  </view>

  <!-- æœåŠ¡ç‚¹åˆ—è¡¨ -->
  <view class="point-list" wx:if="{{!loading && points.length > 0}}">
    <view class="list-header">
      <text class="list-title">é™„è¿‘æœåŠ¡ç‚¹ï¼ˆ{{points.length}}ï¼‰</text>
    </view>
    <scroll-view class="list-content" scroll-y>
      <view
        class="point-item"
        wx:for="{{points}}"
        wx:key="id"
        bindtap="onPointItemTap"
        data-point="{{item}}"
      >
        <view class="point-info">
          <view class="point-name">{{item.pointName}}</view>
          <view class="point-address">{{item.address}}</view>
          <view class="point-contact" wx:if="{{item.contactPhone}}">
            <text>è”ç³»ç”µè¯ï¼š{{item.contactPhone}}</text>
          </view>
        </view>
        <view class="point-arrow">></view>
      </view>
    </scroll-view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{!loading && points.length === 0}}">
    <text class="empty-text">é™„è¿‘æš‚æ— æœåŠ¡ç‚¹</text>
  </view>
</view>

