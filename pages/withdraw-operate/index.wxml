<!-- pages/withdraw-operate/index.wxml - 提现操作页（类似支付页） -->
<view class="page" wx:if="{{!loading && withdrawDetail}}">
  <!-- 订单信息 -->
  <view class="section order-info">
    <view class="section-title">订单信息</view>
    <view class="order-item">
      <text class="label">订单号：</text>
      <text class="value">{{orderNo}}</text>
    </view>
    <view class="order-item" wx:if="{{withdrawDetail.withdrawStatusDesc}}">
      <text class="label">订单状态：</text>
      <text class="value status">{{withdrawDetail.withdrawStatusDesc}}</text>
    </view>
  </view>

  <!-- 金额明细 -->
  <view class="section amount-info">
    <view class="section-title">金额明细</view>
    <view class="amount-item">
      <text class="label">提现金额：</text>
      <text class="value">¥{{amountStr || '0.00'}}</text>
    </view>
    <view class="amount-item" wx:if="{{feeStr && feeStr !== '0.00'}}">
      <text class="label">手续费：</text>
      <text class="value">¥{{feeStr || '0.00'}}</text>
    </view>
    <view class="amount-item final">
      <text class="label">实际到账：</text>
      <text class="value final-amount">¥{{actualAmountStr || '0.00'}}</text>
    </view>
  </view>

  <!-- 提示信息 -->
  <view class="section tips-section">
    <view class="section-title">温馨提示</view>
    <view class="tips-item">
      <text class="tips-dot">·</text>
      <text class="tips-text">提现后需要确认收款才会到账</text>
    </view>
    <view class="tips-item">
      <text class="tips-dot">·</text>
      <text class="tips-text">24小时内未确认收款将自动退款</text>
    </view>
  </view>

  <!-- 提现按钮栏 -->
  <view class="payment-bar">
    <view class="payment-summary">
      <view class="summary-main">
        <text class="summary-label">合计：</text>
        <text class="summary-amount">¥{{actualAmountStr || '0.00'}}</text>
      </view>
      <view class="summary-remain" wx:if="{{withdrawDetail && withdrawDetail.withdrawStatus === 2 && transferRemainStr}}">
        <text class="summary-remain-label">剩余：</text>
        <text class="summary-remain-time">{{transferRemainStr}}</text>
      </view>
    </view>
    <view class="payment-buttons">
      <view class="primary-buttons">
    <button 
      wx:for="{{allowedActions}}" 
      wx:key="*this"
          wx:if="{{item === 'WITHDRAW' || item === 'CONTINUE_WITHDRAW'}}"
          class="pay-btn primary-btn" 
      bindtap="handleAction"
      data-action="{{item}}"
          disabled="{{submitting}}" 
          loading="{{submitting}}"
    >
          {{item === 'WITHDRAW' ? '发起提现' : '继续提现'}}
    </button>
      </view>
      <view class="secondary-buttons" wx:if="{{hasCancelButton}}">
        <text class="cancel-btn-text" bindtap="handleAction" data-action="CANCEL_TRANSFER">取消本次提现</text>
      </view>
    </view>
  </view>
</view>

<view class="loading" wx:if="{{loading}}">
  <text>加载中...</text>
</view>

<!-- 自定义倒计时加载（覆盖层） -->
<view wx:if="{{showWithdrawLoading}}" style="position: fixed; left: 0; top: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.45); z-index: 9999; display: flex; align-items: center; justify-content: center;">
  <view style="background: #ffffff; padding: 32rpx 40rpx; border-radius: 16rpx; min-width: 480rpx; display: flex; flex-direction: column; align-items: center;">
    <view style="width: 72rpx; height: 72rpx; border: 6rpx solid #eaeaea; border-top-color: #09ccb5; border-radius: 50%; animation: spin 1s linear infinite; margin-bottom: 20rpx;"></view>
    <text style="font-size: 28rpx; color: #333;">确认提现结果中…</text>
    <text style="font-size: 24rpx; color: #999; margin-top: 8rpx;">约{{withdrawLoadingCountdown}}秒</text>
  </view>
</view>
