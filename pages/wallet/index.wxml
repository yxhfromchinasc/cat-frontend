<view class="page">
  <view class="page-header">
    <!-- ä½™é¢æ˜¾ç¤ºåŒºåŸŸ -->
    <view class="balance-section">
      <view class="balance-item">
        <text class="balance-label">å¾…å…¥è´¦</text>
        <text class="balance-amount">Â¥{{pendingAmountStr}}</text>
      </view>
      <view class="balance-divider"></view>
      <view class="balance-item">
        <text class="balance-label">å½“å‰é›¶é’±</text>
        <text class="balance-amount">Â¥{{balanceStr}}</text>
      </view>
    </view>
    
    <view class="card">
      <view class="section-title">è´¦æˆ·æ“ä½œ</view>
      <view class="actions">
        <button class="btn primary" bindtap="goRecharge">
          <text class="btn-text">å……å€¼</text>
        </button>
        <button class="btn" bindtap="goWithdraw">
          <text class="btn-text">æç°</text>
        </button>
      </view>
    </view>
  </view>

  <view class="card transaction-card">
    <view class="section-title">äº¤æ˜“è®°å½•</view>
    
    <!-- äº¤æ˜“è®°å½•åˆ—è¡¨ -->
    <scroll-view class="transaction-list" scroll-y="{{true}}" lower-threshold="50" bindscrolltolower="loadMore">
      <view 
        class="transaction-item" 
        wx:for="{{transactions}}" 
        wx:key="id"
      >
        <view class="transaction-left">
          <view class="transaction-icon" style="background: {{item.typeColor}}22; color: {{item.typeColor}}">
            <text>{{item.typeIcon}}</text>
          </view>
          <view class="transaction-info">
            <view class="transaction-type">{{item.typeName}}</view>
            <view class="transaction-desc">{{item.description || 'äº¤æ˜“'}}</view>
            <view class="transaction-time">{{item.timeStr}}</view>
          </view>
        </view>
        <view class="transaction-right">
          <view class="transaction-amount {{item.isIncome ? 'income' : 'expense'}}">
            {{item.amountStr}}
          </view>
        </view>
      </view>
      
      <!-- ç©ºçŠ¶æ€ -->
      <view class="empty-state" wx:if="{{transactions.length === 0 && !loading}}">
        <text class="empty-icon">ğŸ“‹</text>
        <text class="empty-text">æš‚æ— äº¤æ˜“è®°å½•</text>
      </view>
      
      <!-- åŠ è½½æ›´å¤š -->
      <view class="load-more" wx:if="{{transactions.length > 0}}">
        <view class="load-more-btn" wx:if="{{hasMore && !loading}}" bindtap="loadMore">
          <text>åŠ è½½æ›´å¤š</text>
        </view>
        <view class="load-more-text" wx:if="{{!hasMore}}">
          <text>æ²¡æœ‰æ›´å¤šäº†</text>
        </view>
        <view class="load-more-loading" wx:if="{{loading}}">
          <text>åŠ è½½ä¸­...</text>
        </view>
      </view>
    </scroll-view>
  </view>
</view>
